(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(13),c=n.n(o),u=n(14),i=n(2),l=function(e){var t=e.addNameNumber,n=e.newName,r=e.handleNewPerson,o=e.newNumber,c=e.handleNewNumber;return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:t},a.a.createElement("div",null,"Name: ",a.a.createElement("input",{value:n,onChange:r})),a.a.createElement("div",null,"Number: ",a.a.createElement("input",{value:o,onChange:c})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"}," Add "))))},d=function(e){var t=e.person,n=e.deleteEntry;return a.a.createElement("div",null,t.name," ",t.number,a.a.createElement("button",{onClick:n}," Delete "))},f=n(3),m=n.n(f),s="/api/persons",b=function(){return m.a.get(s).then((function(e){return e.data}))},h=function(e){return m.a.post(s,e).then((function(e){return e.data}))},p=function(e,t){return m.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))},v=function(e){return m.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},O=function(e){var t=e.message,n=e.isFailure;if(null===t)return null;var r=n?"error":"success";return a.a.createElement("div",{className:r},t)};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var j=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),f=Object(i.a)(c,2),m=f[0],s=f[1],j=Object(r.useState)(""),w=Object(i.a)(j,2),E=w[0],y=w[1],N=Object(r.useState)(""),P=Object(i.a)(N,2),k=P[0],S=P[1],D=Object(r.useState)(null),C=Object(i.a)(D,2),T=C[0],R=C[1],A=Object(r.useState)(!1),I=Object(i.a)(A,2),F=I[0],x=I[1];Object(r.useEffect)((function(){b().then((function(e){o(e)})).catch((function(){return console.log("Rejected during getAll")}))}),[]);var J=n.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())}));return a.a.createElement("div",null,a.a.createElement("h1",null," Working with Phonebook "),a.a.createElement(O,{message:T,isFailure:F}),a.a.createElement("div",null,"Filter shown with: ",a.a.createElement("input",{value:k,onChange:function(e){S(e.target.value)}})),a.a.createElement("h2",null,"Add to Phonebook "),a.a.createElement(l,{addNameNumber:function(e){if(e.preventDefault(),-1===n.findIndex((function(e){return e.name===m}))){h({name:m,number:E}).then((function(e){o(n.concat(e)),s(""),y(""),x(!1),R("Added ".concat(m)),setTimeout((function(){R(null)}),3e3)})).catch((function(){return console.log("Rejected during create")}))}else{if(window.confirm("".concat(m," is already added to Phonebook. Replace the old number with a new one?"))){var t=n.find((function(e){return e.name===m})),r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{phone:E}),a=t.id;p(a,r).then((function(e){o(n.map((function(t){return t.id===a?e:t}))),s(""),y(""),x(!1),R("Updated ".concat(t.name)),setTimeout((function(){R(null)}),3e3)})).catch((function(){console.log("Rejected during udpate"),x(!0),R("Information of ".concat(t.name," has already been removed from server")),setTimeout((function(){R(null)}),3e3)}))}x(!0),R("".concat(m," is already added to Phonebook")),setTimeout((function(){R(null)}),3e3),s(""),y("")}},newName:m,handleNewPerson:function(e){s(e.target.value)},newNumber:E,handleNewNumber:function(e){y(e.target.value)}}),a.a.createElement("h3",null,"Numbers "),J.map((function(e){return a.a.createElement(d,{key:e.id,person:e,deleteEntry:function(){return function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name,"?"))&&v(e).then((function(r){console.log("Delete request issued"),o(n.filter((function(t){return t.id!==e}))),x(!0),R("".concat(t.name," deleted")),setTimeout((function(){R(null)}),3e3)})).catch((function(){console.log("Rejected during delete"),x(!0),R("Information of ".concat(t.name," has already been deleted from server")),setTimeout((function(){R(null)}),3e3)}))}(e.id)}})})))};n(37);c.a.render(a.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.9c2ce1bd.chunk.js.map