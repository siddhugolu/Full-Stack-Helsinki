(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(13),c=n.n(o),u=n(14),i=n(2),l=function(e){var t=e.addNameNumber,n=e.newName,r=e.handleNewPerson,o=e.newNumber,c=e.handleNewNumber;return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:t},a.a.createElement("div",null,"Name: ",a.a.createElement("input",{value:n,onChange:r})),a.a.createElement("div",null,"Number: ",a.a.createElement("input",{value:o,onChange:c})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"}," Add "))))},s=function(e){var t=e.person,n=e.deleteEntry;return a.a.createElement("div",null,t.name," ",t.number,a.a.createElement("button",{onClick:n}," Delete "))},f=n(3),d=n.n(f),m="/api/persons",b=function(){return d.a.get(m).then((function(e){return e.data}))},p=function(e){return d.a.post(m,e).then((function(e){return e.data}))},h=function(e,t){return d.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},v=function(e){return d.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},O=function(e){var t=e.message,n=e.isFailure;if(null===t)return null;var r=n?"error":"success";return a.a.createElement("div",{className:r},t)};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var w=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),f=Object(i.a)(c,2),d=f[0],m=f[1],w=Object(r.useState)(""),E=Object(i.a)(w,2),j=E[0],y=E[1],N=Object(r.useState)(""),P=Object(i.a)(N,2),S=P[0],k=P[1],D=Object(r.useState)(null),T=Object(i.a)(D,2),C=T[0],A=T[1],J=Object(r.useState)(!1),F=Object(i.a)(J,2),I=F[0],R=F[1];Object(r.useEffect)((function(){b().then((function(e){o(e)})).catch((function(){return console.log("Rejected during getAll")}))}),[]);var x=n.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())}));return a.a.createElement("div",null,a.a.createElement("h1",null," Working with Phonebook "),a.a.createElement(O,{message:C,isFailure:I}),a.a.createElement("div",null,"Filter shown with: ",a.a.createElement("input",{value:S,onChange:function(e){k(e.target.value)}})),a.a.createElement("h2",null,"Add to Phonebook "),a.a.createElement(l,{addNameNumber:function(e){if(e.preventDefault(),-1===n.findIndex((function(e){return e.name===d}))){p({name:d,number:j}).then((function(e){o(n.concat(e)),m(""),y(""),R(!1),A("Added ".concat(d)),setTimeout((function(){A(null)}),3e3)})).catch((function(e){console.log(e.response.data),m(""),y(""),R(!0);var t=JSON.stringify(e.response.data);A("".concat(t)),setTimeout((function(){A(null)}),3e3)}))}else{if(window.confirm("".concat(d," is already added to Phonebook. Replace the old number with a new one?"))){var t=n.find((function(e){return e.name===d})),r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{number:j}),a=t.id;h(a,r).then((function(e){o(n.map((function(t){return t.id===a?e:t}))),m(""),y(""),R(!1),A("Updated ".concat(t.name)),setTimeout((function(){A(null)}),3e3)})).catch((function(e){console.log(e.response.data),m(""),y(""),R(!0);var t=JSON.stringify(e.response.data);A("".concat(t)),setTimeout((function(){A(null)}),3e3)}))}R(!0),A("".concat(d," is already added to Phonebook")),setTimeout((function(){A(null)}),3e3),m(""),y("")}},newName:d,handleNewPerson:function(e){m(e.target.value)},newNumber:j,handleNewNumber:function(e){y(e.target.value)}}),a.a.createElement("h3",null,"Numbers "),x.map((function(e){return a.a.createElement(s,{key:e.id,person:e,deleteEntry:function(){return function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name,"?"))&&v(e).then((function(r){console.log("Delete request issued"),o(n.filter((function(t){return t.id!==e}))),R(!0),A("".concat(t.name," deleted")),setTimeout((function(){A(null)}),3e3)})).catch((function(){console.log("Rejected during delete"),R(!0),A("Information of ".concat(t.name," has already been deleted from server")),setTimeout((function(){A(null)}),3e3)}))}(e.id)}})})))};n(37);c.a.render(a.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.e8f33301.chunk.js.map